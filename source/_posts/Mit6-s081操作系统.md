---
title: Mit6.s081操作系统笔记
top: false
cover: false
toc: true
mathjax: true
date: 2023-11-14 20:28:19
password:
summary:
tags:
  - 学习总结
categories:
  - 开发知识
---

# 01 Introduction and Examples

## 1.2 操作系统结构

用户空间程序：正在运行的程序，他们处于同一个空间

Kernel：Kernel程序只有一个，维护数据管理每一个用户空间进程，维护硬件资源

> Kernel中的服务：
>
> - 文件系统
> - 进程管理系统
> - 访问控制

硬件资源：CPU，内存，显卡，网卡等

应用程序访问Kernel通过 **系统调用** 来完成，Kernel具有对硬件操作的特殊权限。

## 1.8 fork系统调用

作用：用于创建子进程

fork会拷贝当前进程的内存，并创建一个新的进程，这里的内存包含了进程的指令和数据。

之后，我们就有了两个拥有完全一样内存的进程。fork系统调用在两个进程中都会返回，在原始的进程中，fork系统调用会返回大于0的整数，这个是新创建进程的ID。而在新创建的进程中，fork系统调用会返回0。

如果pid等于0，那么这必然是子进程。调用进程通常称为父进程，父进程看到的pid必然大于0。

除了拷贝内存以外，fork还会拷贝文件描述符表单。

## 1.9 exec,wait系统调用

exec：用于执行新程序

exec系统调用：

- exec系统调用会保留当前的文件描述符表单。所以任何在exec系统调用之前的文件描述符，例如0，1，2等。它们在新的程序中表示相同的东西。
- 通常来说exec系统调用不会返回，因为exec会完全替换当前进程的内存，相当于当前进程不复存在了，所以exec系统调用已经没有地方能返回了。

wait会等待之前创建的子进程退出。当我在命令行执行一个指令时，我们一般会希望Shell等待指令执行完成。不可能让子进程等待父进程退出。

wait的工作原理是，如果当前进程有任何子进程，并且其中一个已经退出了，那么wait会返回。
